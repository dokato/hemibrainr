<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>flywire • hemibrainr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="flywire">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hemibrainr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/flywire.html">flywire</a>
    </li>
    <li>
      <a href="../articles/google_filestream.html">read data from google drive</a>
    </li>
    <li>
      <a href="../articles/match_making.html">neuron match making</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/flyconnectome/hemibrainr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>flywire</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/flyconnectome/hemibrainr/blob/master/vignettes/flywire.Rmd"><code>vignettes/flywire.Rmd</code></a></small>
      <div class="hidden name"><code>flywire.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>“We’re Building Something, Here, Detective, We’re Building It From Scratch. All The Pieces Matter.” (<a href="https://en.wikipedia.org/wiki/The_Wire">Lester, The Wire</a>)</p>
</blockquote>
<div id="flywire-and-r" class="section level1">
<h1 class="hasAnchor">
<a href="#flywire-and-r" class="anchor"></a>Flywire and R</h1>
<p><a href="https://ngl.flywire.ai/?local_id=c8c06ea181ad5447b04beacfc4cb1b66">Flywire</a> is an open neuron reconstruction environment for the full adult fly brain ( <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6063995/">FAFB</a> ) EM data set. Unlike this CATMAID, users concatenate volumetric segmentations to build neurons as 3D meshes. The segmentation was produced by the <a href="https://seunglab.org/">Seung group</a>. With the package <code>hemibrainr</code> we can read flywire neurons as both meshes and skeletons. Meshes can be read directly from flywire, but skeletons need to be built from these meshes. Our pakackage <code>fafbseg</code> can enable users to skeletonise neurons in R (e.g. <code><a href="https://rdrr.io/pkg/fafbseg/man/skeletor.html">fafbseg::skeletor</a></code>), whereas <code>hemibrainr</code> exists to help users get hold of neuron data and match flywire neurons to <a href="https://neuprint.janelia.org/help/videos?dataset=hemibrain">hemibrain</a> neurons.</p>
<p>On the hemibrain <a href="https://support.google.com/a/users/answer/9310156?hl=en">Google team drive</a> for the <a href="https://www.zoo.cam.ac.uk/research/groups/connectomics">Drosphila Connctomcis Group</a>. If you do not have access to this team drive and would like to use it, to make the most our of <code>hemibrainr</code>, please get in contact. You will need top to have access to the drive and have <a href="https://support.google.com/a/answer/7491144?hl=en">Google filestream</a> mounted. Then you will be able to:</p>
<ul>
<li>Read thousands of pre-skeletonised flywire neurons from Google Drive</li>
<li>Read flywire NBLASTs and NLBLASTs to hemibrain neurons</li>
<li>Read flywire neurons that are pre-transformed into a variety of brainspaces</li>
</ul>
<p>Which is all useful stuff.</p>
<div id="authorisation" class="section level2">
<h2 class="hasAnchor">
<a href="#authorisation" class="anchor"></a>Authorisation</h2>
<p>To access flywire data directly from <a href="https://ngl.flywire.ai/?local_id=c8c06ea181ad5447b04beacfc4cb1b66">Flywire</a>, you will need to have an account with them and you will need to use your ‘secret’ associated with that account. Visit <a href="https://globalv1.flywire-daf.com/auth/api/v1/refresh_token" class="uri">https://globalv1.flywire-daf.com/auth/api/v1/refresh_token</a> to get your token. Note that it changes each time you visit this link. Copy it and then:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># remotes::install_github("natverse/fafbseg"), if you don't have the package</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">fafbseg<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fafbseg/man/flywire_set_token.html">flywire_set_token</a></span>(<span class="st">"PASTE_TOKEN_HERE"</span>)</a></code></pre></div>
<p>It is best if you have access to the flywire productio node. Otherwise, you can look at just the base segmentation (useful but a lot less useful).</p>
<p>And now, let’s test by looking at some few information available through <code>hemibrainr</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Load package</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(hemibrainr)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># Else, it wants to see it on the mounted team drive, here</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>()<span class="op">$</span>Gdrive_hemibrain_data</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co"># See matches, you can do this without hemibrain Google Team Drive access</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/utils/View.html">View</a></span>(hemibrain_matched)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co"># Get fresh matches, you cannot do this without access</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">## You will be prompted to log-in through your browser</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">hemibrain_matched_new &lt;-<span class="st"> </span><span class="kw"><a href="../reference/hemibrain_matches.html">hemibrain_matches</a></span>() </a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">## </span><span class="al">NOTE</span><span class="co">: includes hemibrain&lt;-&gt;flywire matches!</span></a></code></pre></div>
</div>
<div id="get-flywire-neurons" class="section level2">
<h2 class="hasAnchor">
<a href="#get-flywire-neurons" class="anchor"></a>Get flywire neurons</h2>
<p>With <code>hemibrainr</code> you can easily get thousands of skeletons for flywire neurons. These skeletons have been built using <a href="https://github.com/schlegelp/skeletor">skeletor</a>, which is a python module. You can also use it <a href="https://github.com/natverse/fafbseg">directly in R</a> with <code><a href="https://rdrr.io/pkg/fafbseg/man/skeletor.html">fafbseg::skeletor</a></code>. It has been run on thousands of neurons, which have then been stored on Google Drive, at: <code>hemibrain/flywire_neurons/</code> as <code><a href="https://rdrr.io/pkg/nat/man/neuronlistfh.html">nat::neuronlistfh</a></code> objects. This means that you can. Let’s demonstrate:</p>
<p>You might want to look at specific flywire neurons. You could choose them based on the meta data that you can see with <code>flywire.neurons[,]</code>. However, you may also want to choose neurons based on a specific location in the data set. You can do this by giving locations to functions in <code>fafbseg</code> and turning them into coordinates. You can either give points in nanometers or raw voxel space. Note that the flywire dataset has a different registration than FAFB14 (used in CATMAID and also some other published data sources).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Let's say we want the ID for a neuron at these voxel coordinates:</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">pos =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">165630</span>,<span class="dv">24412</span>,<span class="dv">3765</span>),<span class="dt">ncol=</span><span class="dv">3</span>) <span class="co"># Can be copied</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co"># from the button at the top of flywire https://ngl.flywire.ai/</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">pos.nm =<span class="st"> </span>pos<span class="op">*</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">40</span>) <span class="co"># this is what it would be in nanometers</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># Find the flywire ID!</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">ids =<span class="st"> </span>fafbseg<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fafbseg/man/flywire_xyz2id.html">flywire_xyz2id</a></span>(pos, <span class="dt">rawcoords =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># OR: ids = fafbseg::flywire_xyz2id(pos.nm, rawcoords = FALSE)</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co"># What if we want to find the flywire ID associated with a neuron</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co"># From FAFBv14, e.g. from the 'walled garden' CATMAID instance?</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">fafbseg<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fafbseg/man/choose_segmentation.html">choose_segmentation</a></span>(<span class="st">"flywire"</span>)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co"># OR: choose_segmentation("flywire-sandbox") for the base segmentation</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14">nx =<span class="st"> </span>nat.templatebrains<span class="op">::</span><span class="kw">xform_brain</span>(elmr<span class="op">::</span>dense_core_neurons, <span class="dt">ref=</span><span class="st">"FlyWire"</span>, <span class="dt">sample=</span><span class="st">"FAFB14"</span>)</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">xyz =<span class="st"> </span>nat<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/nat/man/xyzmatrix.html">xyzmatrix</a></span>(nx)</a>
<a class="sourceLine" id="cb3-16" data-line-number="16">ids =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(fafbseg<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fafbseg/man/flywire_xyz2id.html">flywire_xyz2id</a></span>(xyz[<span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(xyz),<span class="dv">100</span>),]))</a></code></pre></div>
</div>
<div id="skeletonise-flywire-neurons-yourself" class="section level2">
<h2 class="hasAnchor">
<a href="#skeletonise-flywire-neurons-yourself" class="anchor"></a>Skeletonise flywire neurons yourself</h2>
<p>We can also skeletonise neurons ourselvesu using <a href="https://github.com/natverse/fafbseg">skeletor pipeline in R</a>. This pipeline reads meshes from flywire, contracts them for accurate skeletonisation, and produces a skeletonised mesh. In R, we also try to re-root the neuron at it’s estimated soma location.</p>
<p>You will need to install the python modules releate to skeletor to get it to work. Please follow the instructions <a href="https://github.com/schlegelp/skeletor">here</a> for the python version. <a href="">Here</a>, we provide a guide to get everthing working in R (in short <code>reticulate</code> is used to run python code in a specific, stable conda environment we make for R to use).</p>
<p>Once everything is installed, this ought to work:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">neurons =<span class="st"> </span>fafbseg<span class="op">:::</span><span class="kw">skeletor</span>(ids, <span class="dt">brain =</span> elmr<span class="op">::</span>FAFB14.surf) <span class="co"># The brain arguments helps</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># to re-root the soma</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">plot3d</span>(neurons) <span class="co"># note, in flywire space</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">plot3d</span>(nx, <span class="dt">col=</span><span class="st">"black"</span>, <span class="dt">lwd  =</span><span class="dv">2</span>) <span class="co"># note, in flywire space</span></a></code></pre></div>
</div>
<div id="add-flywire-neurons-to-the-google-drive" class="section level2">
<h2 class="hasAnchor">
<a href="#add-flywire-neurons-to-the-google-drive" class="anchor"></a>Add flywire neurons to the Google Drive</h2>
<p>If you had to go to the hassle of skeletonising some flywire neurons that were not on the Google Drive, you don’t want to have to do this again. To that end, you can add them to the Goolge Drive as so:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/flywire_neurons.html">flywire_neurons_update</a></span>(<span class="dt">x =</span> fw.ids, <span class="dt">.parallel =</span> <span class="ot">TRUE</span>, <span class="dt">OmitFailures =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># This can take a little while</span></a></code></pre></div>
<p>You can also add flywire neurons to precomputed NBLASTs.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/flywire_neurons.html">flywire_nblast_update</a></span>(<span class="dt">x =</span> neurons, <span class="dt">nblast =</span> <span class="st">"hemibrain-flywire"</span>)</a></code></pre></div>
<p>These functions can take a long time to run. For example, if adding to the hemibrain-flywire NBLAST, all ~25k flywire neurons need to be read in order to calculate the NBLAST. You can also request that your flywire neurons are added to the precomputations we try to make en mass periodically for the Google drive, if you do not need your answer ASAP. You can do this as so:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/flywire_neurons.html">flywire_request</a></span>(<span class="dt">request =</span> fw.ids)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># request can also be a neuronlist in FlyWire space (fastest way)</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># Or a matrix with x,y,z positions to add directly.</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co"># Otherwise skeletor is called to skeletonsie flywire neurons related</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co"># to the given IDs, and the position of the root</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co"># is added.</span></a></code></pre></div>
</div>
<div id="match-flywire-neurons" class="section level2">
<h2 class="hasAnchor">
<a href="#match-flywire-neurons" class="anchor"></a>Match flywire neurons</h2>
<p>The neuron matching pipeline reads neuron skeletons from Google Drive and and displays them. Flywire skeletons are shown in dark grey (their mirrored equivalents in light grey) and potential hemibrain matches in red. This depends also on the precomputed NBLASTs on the hemibrain team drive. For full details, see our <code>match_making</code> vignette.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># As simple as:</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="../reference/hemibrain_matching.html">fafb_matching</a></span>(ids, <span class="dt">repository =</span> <span class="st">"fylwire"</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># Or if you just want to go after entries flagegd for your User:</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="kw"><a href="../reference/hemibrain_matching.html">fafb_matching</a></span>(<span class="dt">repository =</span> <span class="st">"fylwire"</span>)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># See the results of matching</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">hemibrain_matched_new &lt;-<span class="st"> </span><span class="kw"><a href="../reference/hemibrain_matches.html">hemibrain_matches</a></span>() </a></code></pre></div>
<p>What if the flywire neuron you want, is not available to match?</p>
<p>For it to be matchable, we need to add the skeleton to google drive and then add this entry into the NBLAST computation. Those steps were covered above. Because there are a lot of flywire neurons and hemibrain neurons, they are rather slow and cumbersome. For this reason, we also run a ~daily compute of skeletons and NBLASTs and put them on our Google drive. In order to flag a neuron in flywire for skeletonisation and NBLASTing, its coordinates need to be either in the FAFB tab of <a href="https://docs.google.com/spreadsheets/d/1OSlDtnR3B1LiB5cwI5x5Ql6LkZd8JOS5bBr-HTi0pOw/edit">em_matching</a> or <a href="https://docs.google.com/spreadsheets/d/1OSlDtnR3B1LiB5cwI5x5Ql6LkZd8JOS5bBr-HTi0pOw/edit">flywire_interest</a>. We use XYZ coordinates in flywire raw voxel space, rather than flywire IDs, because the latter frequently change as a consequence of merging and splitting neurons. Flywire is, at the time of writing (pandemic 2020), an active tracing project.</p>
</div>
<div id="manage-the-google-sheet" class="section level2">
<h2 class="hasAnchor">
<a href="#manage-the-google-sheet" class="anchor"></a>Manage the Google sheet</h2>
<p>Matches between FAFB neurons (both from FAFBv14 CATMAID and flywire) are recorded on our master Google sheet for matching, <a href="https://docs.google.com/spreadsheets/d/1OSlDtnR3B1LiB5cwI5x5Ql6LkZd8JOS5bBr-HTi0pOw/edit">em_matching</a>. See the <code>match_making</code> vignette for details. Because flywire IDs change frequently as a consequence of tracing, and because we keep adding new skeletons to our Google drive dump, it is nice to update the master Google sheet for matching every now and then. We also want to make sure that FAFBv14-&gt;flywire matches are recapitulated on the ‘hemibrain’ matches sheet. This can be done as follows, but can take a long time to run to best to leave it over night:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/hemibrain_add_made_matches.html">flywire_matching_rewrite</a></span>() <span class="co"># bring all the flywire information up to date</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#flywire-and-r">Flywire and R</a><ul class="nav nav-pills nav-stacked">
<li><a href="#authorisation">Authorisation</a></li>
      <li><a href="#get-flywire-neurons">Get flywire neurons</a></li>
      <li><a href="#skeletonise-flywire-neurons-yourself">Skeletonise flywire neurons yourself</a></li>
      <li><a href="#add-flywire-neurons-to-the-google-drive">Add flywire neurons to the Google Drive</a></li>
      <li><a href="#match-flywire-neurons">Match flywire neurons</a></li>
      <li><a href="#manage-the-google-sheet">Manage the Google sheet</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alexander Bates, Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
